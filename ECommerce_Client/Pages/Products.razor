@page "/Products"
@inject IProductService _productService


@if (IsProcessing)
{
    <PageTitle>Loading</PageTitle>
    <div class="text-center">
        <MudProgressCircular Color="Color.Primary" Size="Size.Large" Indeterminate="true" />
    </div>
}
else
{
    <PageTitle>Products</PageTitle>
    <body class="font-sans">
        <_ProductsHeader></_ProductsHeader>
        <div class="container mx-auto flex flex-wrap pb-20">
            @foreach (var category in ECommerceProducts.Select(u => u.Category.Name).Distinct())
            {
                <div class="w-full md:w-1/2 lg:w-1/3 px-6 mb-12">
                    <a href="#">
                        <img src="https://images.unsplash.com/photo-1617331721458-bd3bd3f9c7f8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8MTV8UUhlWlB5T3BwY2N8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=60" class="w-full h-64 object-cover mb-6" />
                    </a>
                    <h3 class="text-2xl uppercase font-display font-extrabold tracking-widest mb-2">Category Name: @category</h3>
                    <p class="text-xs text-gray-500 mb-4">Eros in cursus turpis massa tincidunt dui ut ornare. Vestibulum morbi blandit cursus risus at ultrices mi. Augue ut lectus arcu bibendum at varius.</p>
                    <a href="/products" class="bg-gray-500 text-black inline-block border-2 border-black py-3 px-8 uppercase font-display font-thin tracking-wide text-xs hover:bg-black hover:text-indigo-600 hover:border-indigo-600">Learn more</a>
                </div>
            }
        </div>
        <_FooterDarkGray></_FooterDarkGray>
    </body>
}


@code {
    public bool IsProcessing { get; set; } = false;
    public IEnumerable<ProductDTO> ECommerceProducts { get; set; } = new List<ProductDTO>();

    protected override async Task OnInitializedAsync()
    {
        IsProcessing = true;
        ECommerceProducts = await _productService.GetAll();
        IsProcessing = false;
    }

}

